(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-471dfb17"],{"40cf":function(e,t,o){"use strict";o("fa1f")},eb28:function(e,t,o){"use strict";o.r(t);o("4e82"),o("b0c0"),o("c7cd");var n=o("7a23"),r=function(e){return Object(n["pushScopeId"])("data-v-194f78d0"),e=e(),Object(n["popScopeId"])(),e},c={class:"gray",style:{width:"100%"}},a=r((function(){return Object(n["createElementVNode"])("div",{class:"card-header"},[Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("span",null,"机器人统计")])],-1)})),l={class:"flex-start"},i=Object(n["createTextVNode"])("         "),d=r((function(){return Object(n["createElementVNode"])("span",null,"--",-1)})),u=Object(n["createTextVNode"])("正常"),s=Object(n["createTextVNode"])("被踢"),p={class:"el-dropdown-link"},b={key:1},f=r((function(){return Object(n["createElementVNode"])("img",{width:"60",height:"60",src:"https://ave.s3.ap-east-1.amazonaws.com/token_icon/defaultToken.png",alt:"",srcset:""},null,-1)})),m=Object(n["createTextVNode"])("取消"),g=Object(n["createTextVNode"])("确认"),h={style:{width:"300px",height:"300px"}},j={class:"dialog-footer"},O=Object(n["createTextVNode"])("取 消"),V=Object(n["createTextVNode"])("确定");function C(e,t,o,r,C,w){var v=Object(n["resolveComponent"])("el-table-column"),x=Object(n["resolveComponent"])("el-tag"),N=Object(n["resolveComponent"])("caret-bottom"),_=Object(n["resolveComponent"])("el-icon"),y=Object(n["resolveComponent"])("el-dropdown-item"),k=Object(n["resolveComponent"])("el-dropdown-menu"),B=Object(n["resolveComponent"])("el-dropdown"),S=Object(n["resolveComponent"])("el-table"),T=Object(n["resolveComponent"])("el-pagination"),U=Object(n["resolveComponent"])("el-card"),L=Object(n["resolveComponent"])("el-col"),D=Object(n["resolveComponent"])("el-row"),z=Object(n["resolveComponent"])("el-input"),E=Object(n["resolveComponent"])("el-form-item"),R=Object(n["resolveComponent"])("el-image"),I=Object(n["resolveComponent"])("UploadFilled"),$=Object(n["resolveComponent"])("CircleCloseFilled"),H=Object(n["resolveComponent"])("el-switch"),F=Object(n["resolveComponent"])("el-button"),M=Object(n["resolveComponent"])("el-form"),Z=Object(n["resolveComponent"])("el-dialog"),W=Object(n["resolveComponent"])("vueCropper"),P=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createElementBlock"])("main",c,[Object(n["createVNode"])(D,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(L,{span:24,style:{"margin-bottom":"10px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(U,{class:"box-card",shadow:"never"},{header:Object(n["withCtx"])((function(){return[a]})),default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",l,[Object(n["createElementVNode"])("span",null,[Object(n["createElementVNode"])("h5",null,"总活跃群数："+Object(n["toDisplayString"])(C.active_chat_count),1)]),i,Object(n["createElementVNode"])("span",null,[Object(n["createElementVNode"])("h5",null,"活跃群总人数："+Object(n["toDisplayString"])(C.active_member_count),1)])]),Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])(S,{data:C.tableData,stripe:"",style:{width:"100%"},"default-sort":{prop:C.conditions.sort,order:C.conditions.direction?C.conditions.direction+"ending":null},onSortChange:w.handleSortChange},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(v,{label:"群名称",align:"left","show-overflow-tooltip":"",width:"200"},{default:Object(n["withCtx"])((function(e){var t=e.row;return[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(t.chat_title),1)]})),_:1}),Object(n["createVNode"])(v,{prop:"chat_type",label:"群类型",align:"center"}),Object(n["createVNode"])(v,{prop:"chat_member_count",label:"群人数",align:"center",sortable:"custom","sort-orders":["ascending","descending"]}),Object(n["createVNode"])(v,{label:"群语言",align:"center"},{default:Object(n["withCtx"])((function(e){e.row;return[d]})),_:1}),Object(n["createVNode"])(v,{label:"机器人状态",align:"center"},{default:Object(n["withCtx"])((function(e){var t=e.row;return["0"==t.staus?(Object(n["openBlock"])(),Object(n["createBlock"])(x,{key:0,type:"success",effect:"dark"},{default:Object(n["withCtx"])((function(){return[u]})),_:1})):(Object(n["openBlock"])(),Object(n["createBlock"])(x,{key:1,type:"danger",effect:"dark"},{default:Object(n["withCtx"])((function(){return[s]})),_:1}))]})),_:1}),Object(n["createVNode"])(v,{label:"最早进群时间",width:"200",prop:"join_time",align:"center",sortable:"custom","sort-orders":["ascending","descending"]},{default:Object(n["withCtx"])((function(t){var o=t.row;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$f.formatDate(new Date(o.join_time).getTime()/1e3)),1)]})),_:1}),Object(n["createVNode"])(v,{label:"最近一次播报时间",width:"200",align:"center",prop:"leave_time",sortable:"custom","sort-orders":["ascending","descending"]},{default:Object(n["withCtx"])((function(t){var o=t.row;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(o.leave_time?e.$f.formatDate(new Date(o.leave_time).getTime()/1e3):"--"),1)]})),_:1}),Object(n["createVNode"])(v,{label:"配置token",align:"center",prop:"token_count",sortable:"custom","sort-orders":["ascending","descending"]},{default:Object(n["withCtx"])((function(e){var t=e.row;return[t.token_count>=1?(Object(n["openBlock"])(),Object(n["createBlock"])(B,{key:0,trigger:"click"},{dropdown:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(k,null,{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(t.settings,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])(y,{class:"clearfix",key:t},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])((null===e||void 0===e?void 0:e.contract_hash)||""),1)]})),_:2},1024)})),128))]})),_:2},1024)]})),default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("span",p,[Object(n["createVNode"])(x,{effect:"light",size:"small"},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])("+"+Object(n["toDisplayString"])(t.token_count),1)]})),_:2},1024),Object(n["createVNode"])(_,{class:"el-icon--right"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(N)]})),_:1})])]})),_:2},1024)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",b,"--"))]})),_:1})]})),_:1},8,["data","default-sort","onSortChange"])),[[P,C.dataLoading]]),Object(n["createVNode"])(T,{style:{display:"flex",width:"100%","justify-content":"center",margin:"30px 0 0 0"},currentPage:C.conditions.pageNo,"onUpdate:currentPage":t[0]||(t[0]=function(e){return C.conditions.pageNo=e}),"page-size":C.conditions.pageSize,background:"",layout:"total, prev, pager, next",total:C.total,onSizeChange:w.handleSizeChange,onCurrentChange:w.handleCurrentChange},null,8,["currentPage","page-size","total","onSizeChange","onCurrentChange"])]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(Z,{title:w.dialogTitle,modelValue:C.dialogVisible,"onUpdate:modelValue":t[17]||(t[17]=function(e){return C.dialogVisible=e}),width:"600px",top:"5vh","close-on-click-modal":!1,onClosed:w.handelClose},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(M,{model:C.form,rules:C.rules,ref:"form",onSubmit:Object(n["withModifiers"])(w.updateDapp,["prevent"]),"label-width":"auto"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(E,{label:"名称",prop:"name"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(z,{modelValue:C.form.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return C.form.name=e}),clearable:""},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(E,{label:"现有logo"},{default:Object(n["withCtx"])((function(){return[C.form.icon?(Object(n["openBlock"])(),Object(n["createBlock"])(R,{key:0,style:{width:"60px",height:"60px","border-radius":"50%"},src:C.form.icon,fit:"fill"},{error:Object(n["withCtx"])((function(){return[f]})),_:1},8,["src"])):Object(n["createCommentVNode"])("",!0)]})),_:1}),Object(n["createVNode"])(E,{label:"上传logo",prop:"profile_picture"},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("label",{for:"uploaderFile-1",class:"img-preview",style:Object(n["normalizeStyle"])({backgroundImage:C.fileUrl?"url("+C.fileUrl+")":""})},[C.fileUrl?(Object(n["openBlock"])(),Object(n["createBlock"])(_,{key:1,onClick:Object(n["withModifiers"])(w.removeFile,["stop","prevent"]),class:"el-icon-error"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])($)]})),_:1},8,["onClick"])):(Object(n["openBlock"])(),Object(n["createBlock"])(_,{key:0,class:"el-icon-upload"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(I)]})),_:1}))],4),Object(n["createElementVNode"])("input",{type:"file",ref:"fileLogo",id:"uploaderFile-1",accept:"image/png, image/jpeg, image/gif, image/jpg",onChange:t[2]||(t[2]=function(){return w.beforeUpload&&w.beforeUpload.apply(w,arguments)})},null,544)]})),_:1}),Object(n["createVNode"])(E,{label:"sortId",prop:"sortId"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(z,{modelValue:C.form.sortId,"onUpdate:modelValue":t[3]||(t[3]=function(e){return C.form.sortId=e}),clearable:"",placeholder:"输入sortId"},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(E,{label:"链",prop:"chain"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(z,{modelValue:C.form.chain,"onUpdate:modelValue":t[4]||(t[4]=function(e){return C.form.chain=e}),placeholder:"多链请以逗号分隔"},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(E,{label:"链Tag",prop:"chain"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(z,{modelValue:C.form.chaintag,"onUpdate:modelValue":t[5]||(t[5]=function(e){return C.form.chaintag=e}),placeholder:"多链Tag请以逗号分隔"},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(E,{label:"分类列表",prop:"taglist"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(z,{modelValue:C.form.taglist,"onUpdate:modelValue":t[6]||(t[6]=function(e){return C.form.taglist=e}),clearable:"",placeholder:"多类请以逗号分隔"},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(E,{label:"类型",prop:"type"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(z,{modelValue:C.form.type,"onUpdate:modelValue":t[7]||(t[7]=function(e){return C.form.type=e}),clearable:""},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(E,{label:"是否热门",prop:"isHot"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(H,{modelValue:C.form.isHot,"onUpdate:modelValue":t[8]||(t[8]=function(e){return C.form.isHot=e}),"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(E,{label:"是否推荐",prop:"isRecommended"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(H,{modelValue:C.form.isRecommended,"onUpdate:modelValue":t[9]||(t[9]=function(e){return C.form.isRecommended=e}),"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(E,{label:"官网",prop:"url"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(z,{modelValue:C.form.url,"onUpdate:modelValue":t[10]||(t[10]=function(e){return C.form.url=e}),modelModifiers:{trim:!0},placeholder:"请输入官网地址",clearable:""},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(E,{label:"twitter",prop:"twitter"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(z,{modelValue:C.form.twitter,"onUpdate:modelValue":t[11]||(t[11]=function(e){return C.form.twitter=e}),modelModifiers:{trim:!0},placeholder:"请输入twitter",clearable:""},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(E,{label:"telegram",prop:"telegram"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(z,{modelValue:C.form.telegram,"onUpdate:modelValue":t[12]||(t[12]=function(e){return C.form.telegram=e}),modelModifiers:{trim:!0},placeholder:"请输入telegram",clearable:""},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(E,{label:"discord",prop:"discord"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(z,{modelValue:C.form.discord,"onUpdate:modelValue":t[13]||(t[13]=function(e){return C.form.discord=e}),modelModifiers:{trim:!0},placeholder:"请输入discord",clearable:""},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(E,{label:"英文描述",prop:"intro"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(z,{modelValue:C.form.intro,"onUpdate:modelValue":t[14]||(t[14]=function(e){return C.form.intro=e}),modelModifiers:{trim:!0},rows:3,type:"textarea",placeholder:"请输入英文描述",clearable:""},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(E,{label:"中文描述",prop:"introZh"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(z,{modelValue:C.form.introZh,"onUpdate:modelValue":t[15]||(t[15]=function(e){return C.form.introZh=e}),modelModifiers:{trim:!0},rows:3,type:"textarea",placeholder:"请输入中文描述",clearable:""},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(E,{label:""},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(F,{onClick:t[16]||(t[16]=function(e){return C.dialogVisible=!1})},{default:Object(n["withCtx"])((function(){return[m]})),_:1}),Object(n["createVNode"])(F,{type:"primary","native-type":"submit",loading:C.addLoading},{default:Object(n["withCtx"])((function(){return[g]})),_:1},8,["loading"])]})),_:1})]})),_:1},8,["model","rules","onSubmit"])]})),_:1},8,["title","modelValue","onClosed"]),Object(n["createVNode"])(Z,{title:"上传icon",modelValue:C.uploadDialogVisible,"onUpdate:modelValue":t[19]||(t[19]=function(e){return C.uploadDialogVisible=e}),width:"600px"},{footer:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("span",j,[Object(n["createVNode"])(F,{onClick:t[18]||(t[18]=function(e){return C.uploadDialogVisible=!1})},{default:Object(n["withCtx"])((function(){return[O]})),_:1}),Object(n["createVNode"])(F,{type:"primary",loading:C.getCropBlobLoading,onClick:w.getCropBlob},{default:Object(n["withCtx"])((function(){return[V]})),_:1},8,["loading","onClick"])])]})),default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",h,[Object(n["createVNode"])(W,{ref:"cropper",img:C.option.img,outputSize:C.option.outputSize,outputType:C.option.outputType,maxImgSize:C.option.maxImgSize,enlarge:C.option.enlarge,high:C.option.high,autoCrop:C.option.autoCrop,autoCropWidth:C.option.autoCropWidth,autoCropHeight:C.option.autoCropHeight,fixed:C.option.fixed,centerBox:C.option.centerBox,canScale:C.option.canScale,fixedBox:C.option.fixedBox},null,8,["img","outputSize","outputType","maxImgSize","enlarge","high","autoCrop","autoCropWidth","autoCropHeight","fixed","centerBox","canScale","fixedBox"])])]})),_:1},8,["modelValue"])])}var w=o("5530"),v=(o("d3b7"),o("ac1f"),o("5319"),o("159b"),o("b64b"),o("99af"),o("3ca3"),o("ddb0"),o("2b3d"),o("9861"),o("365c")),x=(o("179a"),o("04b0")),N={name:"Blacklist",components:{VueCropper:x["a"]},data:function(){return{form:{id:"",icon:"",name:"",chain:"",chaintag:"",isHot:"",isRecommended:"",taglist:"",type:"",profile_picture:"",url:"",telegram:"",twitter:"",discord:"",introZh:"",intro:"",sortId:""},rules:{name:[{required:!0,message:"必填项",trigger:"blur"}]},tableData:[],dataLoading:!1,addLoading:!1,updateLoading:!1,dialogVisible:!1,uploadDialogVisible:!1,option:{img:"",outputSize:.2,outputType:"png",maxImgSize:200,enlarge:.5,high:!1,autoCrop:!0,autoCropWidth:"200",autoCropHeight:"200",fixed:!0,centerBox:!0,canScale:!1,fixedBox:!0},file:"",fileUrl:"",getCropBlobLoading:!1,dialogTitleType:1,total:0,active_chat_count:0,active_member_count:0,conditions:{pageNo:1,pageSize:20,sort:"join_time",direction:"desc"}}},computed:{dialogTitle:function(){var e={1:"添加",2:"编辑"};return e[this.dialogTitleType]}},created:function(){this.getRobotList()},methods:{getRobotList:function(){var e=this;this.dataLoading=!0,Object(v["jc"])(Object(w["a"])({},this.conditions)).then((function(t){e.total=t.total||0,e.active_chat_count=t.active_chat_count||0,e.active_member_count=t.active_member_count||0,e.tableData=(null===t||void 0===t?void 0:t.list)||[]})).catch((function(){e.tableData=[]})).finally((function(){e.dataLoading=!1}))},handleCurrentChange:function(e){this.conditions.pageNo=e,this.getRobotList()},handleSizeChange:function(e){this.conditions.pageSize=e,this.getRobotList()},handleSortChange:function(e){var t,o=e.prop,n=e.order;this.conditions.sort=o,this.conditions.direction=null===n||void 0===n||null===(t=n.replace)||void 0===t?void 0:t.call(n,"ending",""),this.getRobotList()},handelAdd:function(){this.dialogTitleType=1,this.dialogVisible=!0,this.removeFile(),this.form={id:"",icon:"",name:"",chain:"",chaintag:"",isHot:0,isRecommended:0,taglist:"",type:"",profile_picture:"",url:"",telegram:"",twitter:"",discord:"",introZh:"",intro:"",sortId:""}},updateDapp:function(){var e=this;this.$refs.form.validate((function(t){if(t){e.addLoading=!0;var o=new FormData;Object(w["a"])({},e.form);console.log("this.form",e.form),Object.keys(e.form).forEach((function(t){var n,r=null!==(n=e.form[t])&&void 0!==n?n:"";"profile_picture"===t&&""!==r?o.append("profile_picture",r,"".concat(e.form.name,"-").concat(Date.now(),".png")):""!==r&&o.append(t,r)})),1===e.dialogTitleType?Object(v["m"])(o).then((function(t){e.$message.success("添加成功"),e.dialogVisible=!1,e.getRobotList(e.pageNO,e.pageSize)})).catch((function(t){console.log(t),e.$message.error("添加失败")})).finally((function(){e.addLoading=!1})):Object(v["od"])(o).then((function(t){e.$message.success("更新成功"),e.dialogVisible=!1,e.getRobotList(e.pageNO,e.pageSize)})).catch((function(t){console.log(t),e.$message.error("更新失败")})).finally((function(){e.addLoading=!1}))}}))},beforeUpload:function(e){var t=e.target.files[0],o=window.URL.createObjectURL(t);this.option.img=o,this.uploadDialogVisible=!0},removeFile:function(){this.form.profile_picture=null,this.fileUrl="",this.$refs.fileLogo&&(this.$refs.fileLogo.value=""),this.option.img=""},getCropBlob:function(){var e=this;this.$refs.cropper.getCropBlob((function(t){var o=new File([t],e.form.token_address);e.form.profile_picture=o,e.fileUrl=window.URL.createObjectURL(o),e.uploadDialogVisible=!1}))},handelEdit:function(e){this.dialogTitleType=2,this.form={id:e.id,icon:e.icon,name:e.name,chain:e.chain,chaintag:e.chaintag,isHot:e.isHot,isRecommended:e.isRecommended,taglist:e.taglist,type:e.type,profile_picture:"",url:e.url,telegram:e.telegram,twitter:e.twitter,discord:e.discord,introZh:e.introZh,intro:e.intro,sortId:e.sortId},this.dialogVisible=!0},handelClose:function(){this.$refs.form.resetFields()},handelRemove:function(e){var t=this;this.$messageBox.confirm("确定要删除".concat(e.name,"吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then((function(){Object(v["Kc"])(e.id).then((function(e){t.$message({type:"success",message:"删除成功！"}),t.getRobotList(t.pageNO,t.pageSize)})).catch((function(e){console.log(e),t.$message({type:"error",message:e})}))})).catch((function(){t.$message({type:"info",message:"已取消"})}))}}},_=(o("40cf"),o("6b0d")),y=o.n(_);const k=y()(N,[["render",C],["__scopeId","data-v-194f78d0"]]);t["default"]=k},fa1f:function(e,t,o){}}]);