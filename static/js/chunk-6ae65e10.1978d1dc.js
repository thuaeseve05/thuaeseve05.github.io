(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ae65e10"],{"0045":function(e,t,o){"use strict";o.r(t);var r=o("7a23"),a=function(e){return Object(r["pushScopeId"])("data-v-525b4c5a"),e=e(),Object(r["popScopeId"])(),e},n={class:"gray",style:{width:"100%"}},c={class:"card-header"},i=a((function(){return Object(r["createElementVNode"])("span",null,"异动广告管理",-1)})),l={style:{display:"inline-block","margin-left":"20px","font-size":"14px",color:"#888"}},d=Object(r["createTextVNode"])("添加"),u=a((function(){return Object(r["createElementVNode"])("div",null,null,-1)})),s=Object(r["createTextVNode"])("生效"),b=Object(r["createTextVNode"])("失效"),f=Object(r["createTextVNode"])("异动"),m=Object(r["createTextVNode"])("热门"),p=Object(r["createTextVNode"])("预售"),j=Object(r["createTextVNode"])("抢购"),O=Object(r["createTextVNode"])("编辑"),h=Object(r["createTextVNode"])("删除"),g=Object(r["createTextVNode"])(" $ "),V=a((function(){return Object(r["createElementVNode"])("span",null,"* 数字越小显示越靠前",-1)})),w={class:"dialog-footer"},_=Object(r["createTextVNode"])("取 消"),x=Object(r["createTextVNode"])("确 定"),v=Object(r["createTextVNode"])("确 定");function C(e,t,o,a,C,k){var N=Object(r["resolveComponent"])("el-button"),y=Object(r["resolveComponent"])("el-table-column"),T=Object(r["resolveComponent"])("el-tag"),D=Object(r["resolveComponent"])("el-switch"),$=Object(r["resolveComponent"])("el-table"),A=Object(r["resolveComponent"])("el-card"),B=Object(r["resolveComponent"])("el-col"),L=Object(r["resolveComponent"])("el-row"),I=Object(r["resolveComponent"])("el-input"),E=Object(r["resolveComponent"])("el-form-item"),U=Object(r["resolveComponent"])("el-date-picker"),M=Object(r["resolveComponent"])("el-input-number"),S=Object(r["resolveComponent"])("el-option"),q=Object(r["resolveComponent"])("el-select"),R=Object(r["resolveComponent"])("el-form"),Y=Object(r["resolveComponent"])("el-dialog");return Object(r["openBlock"])(),Object(r["createElementBlock"])("main",n,[Object(r["createVNode"])(L,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(B,{span:24,style:{"margin-bottom":"10px"}},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(A,{class:"box-card",shadow:"never"},{header:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",c,[Object(r["createElementVNode"])("div",null,[i,Object(r["createElementVNode"])("span",l,"广告总收入：$ "+Object(r["toDisplayString"])(k.totalFee),1)]),Object(r["createVNode"])(N,{class:"button",type:"primary",link:"",onClick:Object(r["withModifiers"])(k.handelAdd,["stop"])},{default:Object(r["withCtx"])((function(){return[d]})),_:1},8,["onClick"])])]})),default:Object(r["withCtx"])((function(){return[u,Object(r["createVNode"])($,{data:C.tableData,stripe:"",style:{width:"100%"}},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(y,{prop:"front_show_index",label:"位置",width:"80"}),Object(r["createVNode"])(y,{prop:"address",label:"token","min-width":"170"}),Object(r["createVNode"])(y,{prop:"chain",label:"chain"}),Object(r["createVNode"])(y,{prop:"symbol",label:"symbol"}),Object(r["createVNode"])(y,{prop:"create_time",label:"创建时间","min-width":"160"},{default:Object(r["withCtx"])((function(t){var o=t.row;return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.$f.formatDate(o.create_time)),1)]})),_:1}),Object(r["createVNode"])(y,{label:"生效时间范围","min-width":"170"},{default:Object(r["withCtx"])((function(t){var o=t.row;return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.$f.formatDate(o.start_time))+" ~ "+Object(r["toDisplayString"])(e.$f.formatDate(o.end_time)),1)]})),_:1}),Object(r["createVNode"])(y,{prop:"fee",label:"广告费用($)",width:"200"}),Object(r["createVNode"])(y,{prop:"tx_hash",label:"交易哈希",width:"200"}),Object(r["createVNode"])(y,{prop:"",label:"是否生效"},{default:Object(r["withCtx"])((function(e){var t=e.row;return[1e3*t.start_time<=Date.now()&&1e3*t.end_time>=Date.now()?(Object(r["openBlock"])(),Object(r["createBlock"])(T,{key:0,type:"success",effect:"dark"},{default:Object(r["withCtx"])((function(){return[s]})),_:1})):(Object(r["openBlock"])(),Object(r["createBlock"])(T,{key:1,type:"danger",effect:"dark"},{default:Object(r["withCtx"])((function(){return[b]})),_:1}))]})),_:1}),Object(r["createVNode"])(y,{prop:"",label:"类型"},{default:Object(r["withCtx"])((function(e){var t=e.row;return["alert"==t.type?(Object(r["openBlock"])(),Object(r["createBlock"])(T,{key:0,effect:"dark"},{default:Object(r["withCtx"])((function(){return[f]})),_:1})):"hot"==t.type?(Object(r["openBlock"])(),Object(r["createBlock"])(T,{key:1,type:"success",effect:"dark"},{default:Object(r["withCtx"])((function(){return[m]})),_:1})):"presale"==t.type?(Object(r["openBlock"])(),Object(r["createBlock"])(T,{key:2,type:"warning",effect:"dark"},{default:Object(r["withCtx"])((function(){return[p]})),_:1})):"snipe"==t.type?(Object(r["openBlock"])(),Object(r["createBlock"])(T,{key:3,type:"danger",effect:"dark"},{default:Object(r["withCtx"])((function(){return[j]})),_:1})):Object(r["createCommentVNode"])("",!0)]})),_:1}),Object(r["createVNode"])(y,{prop:"remark",label:"备注"}),Object(r["createVNode"])(y,{label:"状态",width:"200",align:"center"},{default:Object(r["withCtx"])((function(e){var t=e.row;return[Object(r["createVNode"])(D,{modelValue:t.is_delete,"onUpdate:modelValue":function(e){return t.is_delete=e},"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"展示","inactive-text":"不展示","active-value":0,"inactive-value":1,loading:C.loading[t.id],onClick:Object(r["withModifiers"])((function(e){return k.handelState(t)}),["stop"])},null,8,["modelValue","onUpdate:modelValue","loading","onClick"])]})),_:1}),Object(r["createVNode"])(y,{label:"操作",width:100==k.role?150:70,align:"center",fixed:"right"},{default:Object(r["withCtx"])((function(e){var t=e.row;return[Object(r["createVNode"])(N,{type:"primary",link:"",onClick:Object(r["withModifiers"])((function(e){return k.handelEdit(t)}),["stop"])},{default:Object(r["withCtx"])((function(){return[O]})),_:2},1032,["onClick"]),100==k.role?(Object(r["openBlock"])(),Object(r["createBlock"])(N,{key:0,type:"primary",link:"",onClick:Object(r["withModifiers"])((function(e){return k.handelRemove(t)}),["stop"])},{default:Object(r["withCtx"])((function(){return[h]})),_:2},1032,["onClick"])):Object(r["createCommentVNode"])("",!0)]})),_:1},8,["width"])]})),_:1},8,["data"])]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(Y,{title:k.dialogTitle,modelValue:C.dialogVisible,"onUpdate:modelValue":t[9]||(t[9]=function(e){return C.dialogVisible=e}),width:"600px",top:"5vh",onClosed:k.handelClose},{footer:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("span",w,[Object(r["createVNode"])(N,{onClick:t[8]||(t[8]=function(e){return C.dialogVisible=!1})},{default:Object(r["withCtx"])((function(){return[_]})),_:1}),1===C.dialogTitleType?(Object(r["openBlock"])(),Object(r["createBlock"])(N,{key:0,type:"primary",loading:C.addLoading,onClick:k.addAlertAd},{default:Object(r["withCtx"])((function(){return[x]})),_:1},8,["loading","onClick"])):2===C.dialogTitleType?(Object(r["openBlock"])(),Object(r["createBlock"])(N,{key:1,type:"primary",loading:C.updateLoading,onClick:k.updateAlertAd},{default:Object(r["withCtx"])((function(){return[v]})),_:1},8,["loading","onClick"])):Object(r["createCommentVNode"])("",!0)])]})),default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(R,{"label-position":"left","label-width":"auto",ref:"form",model:C.form,rules:k.rules},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(E,{label:"token地址",prop:"address"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(I,{modelValue:C.form.address,"onUpdate:modelValue":t[0]||(t[0]=function(e){return C.form.address=e}),modelModifiers:{trim:!0},placeholder:"请输入token地址",clearable:"",disabled:2===C.dialogTitleType},null,8,["modelValue","disabled"])]})),_:1}),Object(r["createVNode"])(E,{label:"chain",prop:"chain"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(I,{modelValue:C.form.chain,"onUpdate:modelValue":t[1]||(t[1]=function(e){return C.form.chain=e}),modelModifiers:{trim:!0},placeholder:"请输入链, 如：bsc",clearable:"",disabled:2===C.dialogTitleType},null,8,["modelValue","disabled"])]})),_:1}),Object(r["createVNode"])(E,{label:"时间范围",prop:"time"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(U,{modelValue:C.form.time,"onUpdate:modelValue":t[2]||(t[2]=function(e){return C.form.time=e}),type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",format:"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(E,{label:"广告费用",prop:"fee"},{default:Object(r["withCtx"])((function(){return[g,Object(r["createVNode"])(M,{modelValue:C.form.fee,"onUpdate:modelValue":t[3]||(t[3]=function(e){return C.form.fee=e}),min:0,controls:!1},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(E,{label:"交易哈希",prop:"tx_hash"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(I,{modelValue:C.form.tx_hash,"onUpdate:modelValue":t[4]||(t[4]=function(e){return C.form.tx_hash=e}),clearable:""},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(E,{label:"类型",prop:"type"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(q,{modelValue:C.form.type,"onUpdate:modelValue":t[5]||(t[5]=function(e){return C.form.type=e}),placeholder:"类型",filterable:"",clearable:""},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(S,{label:"异动",value:"alert"}),Object(r["createVNode"])(S,{label:"热门",value:"hot"})]})),_:1},8,["modelValue"])]})),_:1}),Object(r["createVNode"])(E,{label:"热搜币顺序",prop:"front_show_index"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(M,{modelValue:C.form.front_show_index,"onUpdate:modelValue":t[6]||(t[6]=function(e){return C.form.front_show_index=e}),controls:!1,step:1,"step-strictly":"",min:1},null,8,["modelValue"]),V]})),_:1}),Object(r["createVNode"])(E,{label:"备注",prop:"remark"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(I,{modelValue:C.form.remark,"onUpdate:modelValue":t[7]||(t[7]=function(e){return C.form.remark=e}),modelModifiers:{trim:!0},placeholder:"请输入备注",clearable:""},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["title","modelValue","onClosed"])])}var k=o("1da1"),N=o("5530"),y=(o("96cf"),o("d9e2"),o("d3b7"),o("99af"),o("365c")),T={name:"HotAd",data:function(){var e=function(e,t){return function(e,t,o){""===t||void 0===t?o(new Error("请输入热搜币序号")):o()}};return{form:{address:"",time:[],chain:"",fee:void 0,tx_hash:"",token_index:void 0,front_show_index:void 0,remark:"",is_showasadv:0,hot_rank:0,is_ignorepricechange:0,type:""},tableData:[],dataLoading:!0,loading:{},dialogVisible:!1,curItem:{},dialogTitleType:1,addLoading:!1,updateLoading:!1,validateIndex:e}},computed:{dialogTitle:function(){var e={1:"添加",2:"编辑"};return e[this.dialogTitleType]},totalFee:function(){return this.tableData.reduce((function(e,t){return t.fee+e}),0)},rules:function(){return{address:[{required:!0,message:"请输入token地址",trigger:"blur"}],chain:[{required:!0,message:"请输入链",trigger:"blur"}],time:[{required:!0,message:"请输入时间",trigger:"blur"}],fee:[{required:!0,message:"请输入费用",trigger:"blur"}],token_index:[{required:!0,message:"请输入index",trigger:"blur"}],front_show_index:[{validator:this.validateIndex(this.tableData,this.curItem),trigger:"blur"}]}},role:function(){return this.$store.state.userInfo.role}},created:function(){this.getAlertAdList()},methods:{getAlertAdList:function(){var e=this;this.dataLoading=!0,Object(y["lb"])().then((function(t){e.tableData=t||[]})).catch((function(){e.tableData=[]})).finally((function(){e.dataLoading=!1}))},addAlertAd:function(){var e=this;this.$refs.form.validate((function(t){if(t){var o=Object(N["a"])(Object(N["a"])({},e.form),{},{start_time:parseInt(Date.parse(e.form.time[0])/1e3),end_time:parseInt(Date.parse(e.form.time[1])/1e3)});if(delete o.time,e.addLoading=!0,o.start_time>o.end_time)return e.$message.error("开始时间要小于结束时间"),void(e.addLoading=!1);if(Date.now()/1e3>o.end_time)return e.$message.error("当前时间要小于结束时间"),void(e.addLoading=!1);Object(y["b"])(o).then((function(t){e.$message.success("添加成功"),e.dialogVisible=!1,e.getAlertAdList()})).catch((function(){e.$message.error("添加失败")})).finally((function(){e.addLoading=!1}))}}))},updateAlertAd:function(){var e=this;this.$refs.form.validate((function(t){if(t){var o=Object(N["a"])(Object(N["a"])({},e.form),{},{start_time:parseInt(Date.parse(e.form.time[0])/1e3),end_time:parseInt(Date.parse(e.form.time[1])/1e3)});if(delete o.time,e.updateLoading=!0,o.start_time>o.end_time)return e.$message.error("开始时间要小于 结束时间"),void(e.updateLoading=!1);if(Date.now()/1e3>o.end_time)return e.$message.error("当前时间 要小于 结束时间"),void(e.updateLoading=!1);Object(y["Nc"])(o).then((function(t){e.$message.success("更新成功"),e.dialogVisible=!1,e.getAlertAdList()})).catch((function(){e.$message.error("更新失败")})).finally((function(){e.updateLoading=!1}))}}))},handelState:function(e){var t=this,o=Object(N["a"])(Object(N["a"])({},e),{},{is_delete:e.is_delete});this.loading[e.id]=!0,Object(y["Nc"])(o).then(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$message.success("切换成功");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){t.$message.error("切换失败")})).finally((function(){t.loading[e.id]=!1,t.getAlertAdList()}))},handelClose:function(){this.$refs.form.resetFields()},handelAdd:function(){this.form={address:"",time:[],chain:"",fee:void 0,token_index:void 0,type:""},this.dialogTitleType=1,this.dialogVisible=!0},handelEdit:function(e){this.dialogTitleType=2,this.curItem=e,this.form=Object(N["a"])(Object(N["a"])({},e),{},{time:[new Date(1e3*e.start_time),new Date(1e3*e.end_time)]}),this.dialogVisible=!0},handelRemove:function(e){var t=this;this.$messageBox.confirm("确定要删除".concat(e.symbol,"广告吗?").concat(e.address,"-").concat(e.chain),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(y["sc"])(e.id).then((function(e){t.$message({type:"success",message:"删除成功！"}),t.getAlertAdList()})).catch((function(e){console.log(e),t.$message({type:"error",message:"删除失败！"})}))})).catch((function(){t.$message({type:"info",message:"已取消"})}))}}},D=(o("f5b5"),o("6b0d")),$=o.n(D);const A=$()(T,[["render",C],["__scopeId","data-v-525b4c5a"]]);t["default"]=A},"50b9":function(e,t,o){},f5b5:function(e,t,o){"use strict";o("50b9")}}]);