(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-233acd72"],{"1dde1":function(e,t,o){"use strict";o("53d1")},"25f0":function(e,t,o){"use strict";var n=o("e330"),c=o("5e77").PROPER,l=o("6eeb"),r=o("825a"),a=o("3a9b"),i=o("577e"),d=o("d039"),u=o("ad6d"),s="toString",b=RegExp.prototype,f=b[s],m=n(u),p=d((function(){return"/a/b"!=f.call({source:"a",flags:"b"})})),h=c&&f.name!=s;(p||h)&&l(RegExp.prototype,s,(function(){var e=r(this),t=i(e.source),o=e.flags,n=i(void 0===o&&a(b,e)&&!("flags"in b)?m(e):o);return"/"+t+"/"+n}),{unsafe:!0})},"53d1":function(e,t,o){},eb20:function(e,t,o){"use strict";o.r(t);o("d3b7"),o("ddb0");var n=o("7a23"),c=function(e){return Object(n["pushScopeId"])("data-v-37912fac"),e=e(),Object(n["popScopeId"])(),e},l={class:"gray",style:{width:"100%"}},r={class:"card-header"},a=c((function(){return Object(n["createElementVNode"])("div",null,"链管理",-1)})),i=Object(n["createTextVNode"])("添加"),d=Object(n["createTextVNode"])("编辑"),u=Object(n["createTextVNode"])("删除"),s=Object(n["createTextVNode"])("添加网络"),b={class:"dialog-footer"},f=Object(n["createTextVNode"])("取 消"),m=Object(n["createTextVNode"])("确 定"),p={class:"dialog-footer"},h=Object(n["createTextVNode"])("取 消"),O=Object(n["createTextVNode"])("确 定");function j(e,t,o,c,j,g){var k=Object(n["resolveComponent"])("el-button"),C=Object(n["resolveComponent"])("el-table-column"),_=Object(n["resolveComponent"])("el-tooltip"),V=Object(n["resolveComponent"])("el-table"),v=Object(n["resolveComponent"])("el-card"),w=Object(n["resolveComponent"])("el-col"),x=Object(n["resolveComponent"])("el-row"),y=Object(n["resolveComponent"])("el-input"),N=Object(n["resolveComponent"])("el-form-item"),B=Object(n["resolveComponent"])("el-form"),E=Object(n["resolveComponent"])("el-dialog"),L=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createElementBlock"])("main",l,[Object(n["createVNode"])(x,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(w,{span:24,style:{"margin-bottom":"10px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(v,{class:"box-card",shadow:"never"},{header:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",r,[a,Object(n["createVNode"])(k,{class:"button",type:"primary",link:"",onClick:Object(n["withModifiers"])(g.handelAdd,["stop"])},{default:Object(n["withCtx"])((function(){return[i]})),_:1},8,["onClick"])])]})),default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])(V,{data:j.tableData,stripe:"",style:{width:"100%"}},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(j.keys,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])(C,{key:t,prop:e,label:e,"min-width":"150"},null,8,["prop","label"])})),128)),Object(n["createVNode"])(C,{label:"操作",width:"300",align:"center",fixed:"right"},{default:Object(n["withCtx"])((function(e){var t=e.row;return[Object(n["createVNode"])(k,{type:"primary",onClick:Object(n["withModifiers"])((function(e){return g.handelEdit(t)}),["stop"])},{default:Object(n["withCtx"])((function(){return[d]})),_:2},1032,["onClick"]),Object(n["createVNode"])(k,{type:"danger",onClick:Object(n["withModifiers"])((function(e){return g.remove(t)}),["stop"])},{default:Object(n["withCtx"])((function(){return[u]})),_:2},1032,["onClick"]),"evm"===t.vm_type&&t.chain_id?(Object(n["openBlock"])(),Object(n["createBlock"])(_,{key:0,effect:"dark",content:"添加/切换 网络到 MetaMask",placement:"top","append-to":"#app"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(k,{type:"default",plain:"",onClick:Object(n["withModifiers"])((function(e){return g.addEthereumChain(t)}),["stop"])},{default:Object(n["withCtx"])((function(){return[s]})),_:2},1032,["onClick"])]})),_:2},1024)):Object(n["createCommentVNode"])("",!0)]})),_:1})]})),_:1},8,["data"])),[[L,j.dataLoading]])]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(E,{title:"新增链",modelValue:j.dialogVisible,"onUpdate:modelValue":t[1]||(t[1]=function(e){return j.dialogVisible=e}),width:"600px",top:"5vh","close-on-click-modal":!1,onClosed:g.handelClose},{footer:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("span",b,[Object(n["createVNode"])(k,{onClick:t[0]||(t[0]=function(e){return j.dialogVisible=!1})},{default:Object(n["withCtx"])((function(){return[f]})),_:1}),Object(n["createVNode"])(k,{type:"primary",loading:j.addLoading,onClick:g.add},{default:Object(n["withCtx"])((function(){return[m]})),_:1},8,["loading","onClick"])])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(B,{"label-position":"left","label-width":"auto",ref:"form",model:j.form,rules:j.rules},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(j.keys,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])(N,{key:t,label:e,prop:e},{default:Object(n["withCtx"])((function(){return["decimals"===e?(Object(n["openBlock"])(),Object(n["createBlock"])(y,{key:0,modelValue:j.form[e],"onUpdate:modelValue":function(t){return j.form[e]=t},modelModifiers:{number:!0},placeholder:"请输入".concat(e),clearable:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):(Object(n["openBlock"])(),Object(n["createBlock"])(y,{key:1,modelValue:j.form[e],"onUpdate:modelValue":function(t){return j.form[e]=t},modelModifiers:{trim:!0},placeholder:"请输入".concat(e),clearable:""},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]})),_:2},1032,["label","prop"])})),128))]})),_:1},8,["model","rules"])]})),_:1},8,["modelValue","onClosed"]),Object(n["createVNode"])(E,{title:"编辑链",modelValue:j.dialogVisible1,"onUpdate:modelValue":t[3]||(t[3]=function(e){return j.dialogVisible1=e}),width:"600px",top:"5vh","close-on-click-modal":!1,onClosed:g.handelClose},{footer:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("span",p,[Object(n["createVNode"])(k,{onClick:t[2]||(t[2]=function(e){return j.dialogVisible1=!1})},{default:Object(n["withCtx"])((function(){return[h]})),_:1}),Object(n["createVNode"])(k,{type:"primary",loading:j.updateLoading,onClick:g.update},{default:Object(n["withCtx"])((function(){return[O]})),_:1},8,["loading","onClick"])])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(B,{"label-position":"left","label-width":"auto",ref:"form1",model:j.form,rules:j.rules},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(j.keys,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])(N,{key:t,label:e,prop:e},{default:Object(n["withCtx"])((function(){return["decimals"===e?(Object(n["openBlock"])(),Object(n["createBlock"])(y,{key:0,modelValue:j.form[e],"onUpdate:modelValue":function(t){return j.form[e]=t},modelModifiers:{number:!0},placeholder:"请输入".concat(e),clearable:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):(Object(n["openBlock"])(),Object(n["createBlock"])(y,{key:1,modelValue:j.form[e],"onUpdate:modelValue":function(t){return j.form[e]=t},modelModifiers:{trim:!0},placeholder:"请输入".concat(e),disabled:"chain_id"===e||"vm_type"===e,clearable:""},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"]))]})),_:2},1032,["label","prop"])})),128))]})),_:1},8,["model","rules"])]})),_:1},8,["modelValue","onClosed"])])}var g=o("5530"),k=(o("b64b"),o("4de4"),o("159b"),o("25f0"),o("a9e3"),o("b0c0"),o("365c")),C={name:"Chains",data:function(){return{form:{chain_id:"",name:"",net_name:"",description:"",market_cap_id:"",rpc_url:"",block_explorer_url:"",token_url:"",address_url:"",tx_url:""},rules:{chain_id:[{required:!0,message:"请输入 chain_id",trigger:"blur"}],net_name:[{required:!0,message:"请输入 net_name",trigger:"blur"}],vm_type:[{required:!0,message:"请输入 vm_type",trigger:"blur"}],decimals:[{required:!0,message:"请输入 decimals",trigger:"blur"}]},tableData:[],dataLoading:!0,loading:{},dialogVisible:!1,addLoading:!1,updateLoading:!1,dialogVisible1:!1,keys:["chain_id","name","net_name","description","market_cap_id","rpc_url","block_explorer_url","token_url","address_url","tx_url"]}},created:function(){this.getChainList()},methods:{getChainList:function(){var e=this;this.dataLoading=!0,Object(k["zb"])().then((function(t){var o;(null===t||void 0===t?void 0:t.length)>0&&(e.keys=null===(o=Object.keys(t[0]))||void 0===o?void 0:o.filter((function(e){return"sort_id"!==e})),e.keys.forEach((function(t){e.form[t]=""})));e.tableData=t||[]})).catch((function(){e.tableData=[]})).finally((function(){e.dataLoading=!1}))},handelClose:function(){var e,t,o,n,c,l;null===(e=this.$refs)||void 0===e||null===(t=e.form)||void 0===t||null===(o=t.resetFields)||void 0===o||o.call(t),null===(n=this.$refs)||void 0===n||null===(c=n.form1)||void 0===c||null===(l=c.resetFields)||void 0===l||l.call(c)},handelAdd:function(){var e=this;this.dialogVisible=!0,this.keys.forEach((function(t){e.form[t]=""}))},handelEdit:function(e){this.form=Object(g["a"])({},e),this.dialogVisible1=!0},add:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.addLoading=!0,Object(k["ed"])(e.form).then((function(t){e.$message.success("添加成功"),e.dialogVisible=!1,e.getChainList()})).catch((function(){e.$message.error("添加失败")})).finally((function(){e.addLoading=!1})))}))},update:function(){var e=this;this.$refs.form1.validate((function(t){t&&(e.updateLoading=!0,Object(k["pb"])(e.form).then((function(t){e.$message.success("更新成功"),e.dialogVisible1=!1,e.getChainList()})).catch((function(){e.$message.error("更新失败")})).finally((function(){e.updateLoading=!1})))}))},remove:function(e){var t=this;this.$confirm("是否确认这条链","警告",{type:"warning"}).then((function(){Object(k["db"])(e.chain_id,e.vm_type).then((function(e){t.getChainList(),t.$message.success("删除成功")}))})).catch((function(){}))},addEthereumChain:function(e){var t=this;return window.ethereum?window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x"+Number(e.chain_id).toString(16)}]}).then((function(e){return Promise.resolve(e)})).catch((function(o){return console.log("switchError",o),4902===o.code?window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x"+Number(e.chain_id).toString(16),chainName:e.name,rpcUrls:[e.rpc_url],nativeCurrency:{name:e.main_name,symbol:e.main_name,decimals:18},blockExplorerUrls:[e.block_explorer_url]}]}).then((function(e){return Promise.resolve(e)})).catch((function(e){console.log("addError",e),t.$message.error(e||"添加失败")})):Promise.resolve(null)})):Promise.resolve(null)}}},_=(o("1dde1"),o("6b0d")),V=o.n(_);const v=V()(C,[["render",j],["__scopeId","data-v-37912fac"]]);t["default"]=v}}]);