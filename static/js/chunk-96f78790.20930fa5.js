(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-96f78790"],{"2cb7":function(e,t,a){},"8ccc":function(e,t,a){"use strict";a("2cb7")},b0ca:function(e,t,a){"use strict";a.r(t);var n=a("7a23"),o=function(e){return Object(n["pushScopeId"])("data-v-2aa6700c"),e=e(),Object(n["popScopeId"])(),e},c={class:"gray",style:{width:"100%"}},r={class:"card-header"},i=o((function(){return Object(n["createElementVNode"])("span",null,"公链广告管理",-1)})),l={style:{display:"inline-block","margin-left":"20px","font-size":"14px",color:"#888"}},d=Object(n["createTextVNode"])("添加"),u=o((function(){return Object(n["createElementVNode"])("div",null,null,-1)})),b=Object(n["createTextVNode"])("生效"),s=Object(n["createTextVNode"])("失效"),f=Object(n["createTextVNode"])("显示"),m=Object(n["createTextVNode"])("不显示"),h=Object(n["createTextVNode"])("忽略"),j=Object(n["createTextVNode"])("不忽略"),O=Object(n["createTextVNode"])("编辑"),p=Object(n["createTextVNode"])("删除"),g=Object(n["createTextVNode"])(" $ "),V=o((function(){return Object(n["createElementVNode"])("span",null,"* 数字越小显示越靠前",-1)})),v={class:"dialog-footer"},C=Object(n["createTextVNode"])("取 消"),_=Object(n["createTextVNode"])("确 定"),w=Object(n["createTextVNode"])("确 定");function k(e,t,a,o,k,x){var y=Object(n["resolveComponent"])("el-button"),N=Object(n["resolveComponent"])("el-tab-pane"),T=Object(n["resolveComponent"])("el-tabs"),B=Object(n["resolveComponent"])("el-table-column"),D=Object(n["resolveComponent"])("el-tag"),L=Object(n["resolveComponent"])("el-rate"),$=Object(n["resolveComponent"])("el-switch"),U=Object(n["resolveComponent"])("el-table"),E=Object(n["resolveComponent"])("el-card"),A=Object(n["resolveComponent"])("el-col"),I=Object(n["resolveComponent"])("el-row"),M=Object(n["resolveComponent"])("el-input"),S=Object(n["resolveComponent"])("el-form-item"),F=Object(n["resolveComponent"])("el-option"),q=Object(n["resolveComponent"])("el-select"),z=Object(n["resolveComponent"])("el-radio"),R=Object(n["resolveComponent"])("el-radio-group"),Y=Object(n["resolveComponent"])("el-date-picker"),H=Object(n["resolveComponent"])("el-input-number"),J=Object(n["resolveComponent"])("el-form"),G=Object(n["resolveComponent"])("el-dialog");return Object(n["openBlock"])(),Object(n["createElementBlock"])("main",c,[Object(n["createVNode"])(I,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(A,{span:24,style:{"margin-bottom":"10px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(E,{class:"box-card",shadow:"never"},{header:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",r,[Object(n["createElementVNode"])("div",null,[i,Object(n["createElementVNode"])("span",l,"广告总收入：$ "+Object(n["toDisplayString"])(x.totalFee),1)]),Object(n["createVNode"])(y,{class:"button",type:"primary",link:"",onClick:Object(n["withModifiers"])(x.handelAdd,["stop"])},{default:Object(n["withCtx"])((function(){return[d]})),_:1},8,["onClick"])])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(T,{modelValue:k.activeChain,"onUpdate:modelValue":t[0]||(t[0]=function(e){return k.activeChain=e}),onTabChange:x.handleTabChange},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(k.chains,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])(N,{key:t,label:e.chain,name:e.chain},null,8,["label","name"])})),128))]})),_:1},8,["modelValue","onTabChange"]),Object(n["createVNode"])(T,{modelValue:k.activCategoiry,"onUpdate:modelValue":t[1]||(t[1]=function(e){return k.activCategoiry=e}),onTabChange:x.handleTabChange},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(k.categoires,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])(N,{key:t,label:e.name_zh_ch,name:e.category},null,8,["label","name"])})),128))]})),_:1},8,["modelValue","onTabChange"]),u,Object(n["createVNode"])(U,{data:k.tableData,stripe:"",style:{width:"100%"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(B,{prop:"front_show_index",label:"位置",width:"80"}),Object(n["createVNode"])(B,{prop:"address",label:"token","min-width":"170"}),Object(n["createVNode"])(B,{prop:"chain",label:"chain"}),Object(n["createVNode"])(B,{prop:"symbol",label:"symbol"}),Object(n["createVNode"])(B,{prop:"create_time",label:"创建时间","min-width":"160"},{default:Object(n["withCtx"])((function(t){var a=t.row;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$f.formatDate(a.create_time)),1)]})),_:1}),Object(n["createVNode"])(B,{label:"生效时间范围","min-width":"170"},{default:Object(n["withCtx"])((function(t){var a=t.row;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$f.formatDate(a.start_time))+" ~ "+Object(n["toDisplayString"])(e.$f.formatDate(a.end_time)),1)]})),_:1}),Object(n["createVNode"])(B,{prop:"fee",label:"广告费用($)",width:"200"}),Object(n["createVNode"])(B,{prop:"tx_hash",label:"交易哈希",width:"200"}),Object(n["createVNode"])(B,{prop:"",label:"是否生效"},{default:Object(n["withCtx"])((function(e){var t=e.row;return[1e3*t.start_time<=Date.now()&&1e3*t.end_time>=Date.now()?(Object(n["openBlock"])(),Object(n["createBlock"])(D,{key:0,type:"success",effect:"dark"},{default:Object(n["withCtx"])((function(){return[b]})),_:1})):(Object(n["openBlock"])(),Object(n["createBlock"])(D,{key:1,type:"danger",effect:"dark"},{default:Object(n["withCtx"])((function(){return[s]})),_:1}))]})),_:1}),Object(n["createVNode"])(B,{prop:"",label:"是否显示广告标识"},{default:Object(n["withCtx"])((function(e){var t=e.row;return[1===t.is_showasadv?(Object(n["openBlock"])(),Object(n["createBlock"])(D,{key:0,effect:"dark"},{default:Object(n["withCtx"])((function(){return[f]})),_:1})):(Object(n["openBlock"])(),Object(n["createBlock"])(D,{key:1,effect:"light"},{default:Object(n["withCtx"])((function(){return[m]})),_:1}))]})),_:1}),Object(n["createVNode"])(B,{prop:"",label:"是否忽略跌幅配置"},{default:Object(n["withCtx"])((function(e){var t=e.row;return[1===t.is_ignorepricechange?(Object(n["openBlock"])(),Object(n["createBlock"])(D,{key:0,effect:"dark",type:"danger"},{default:Object(n["withCtx"])((function(){return[h]})),_:1})):(Object(n["openBlock"])(),Object(n["createBlock"])(D,{key:1,effect:"light"},{default:Object(n["withCtx"])((function(){return[j]})),_:1}))]})),_:1}),Object(n["createVNode"])(B,{label:"是否热门",align:"center",width:"150"},{default:Object(n["withCtx"])((function(e){var t=e.row;return[t.hot_rank?(Object(n["openBlock"])(),Object(n["createBlock"])(L,{key:0,modelValue:t.hot_rank,"onUpdate:modelValue":function(e){return t.hot_rank=e},size:"large",clearable:"",max:4,disabled:""},null,8,["modelValue","onUpdate:modelValue"])):Object(n["createCommentVNode"])("",!0)]})),_:1}),Object(n["createVNode"])(B,{prop:"remark",label:"备注"}),Object(n["createVNode"])(B,{label:"状态",width:"200",align:"center"},{default:Object(n["withCtx"])((function(e){var t=e.row;return[Object(n["createVNode"])($,{modelValue:t.is_delete,"onUpdate:modelValue":function(e){return t.is_delete=e},"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"展示","inactive-text":"不展示","active-value":0,"inactive-value":1,loading:k.loading[t.id],onClick:Object(n["withModifiers"])((function(e){return x.handelState(t)}),["stop"])},null,8,["modelValue","onUpdate:modelValue","loading","onClick"])]})),_:1}),Object(n["createVNode"])(B,{label:"操作",width:100==x.role?150:70,align:"center",fixed:"right"},{default:Object(n["withCtx"])((function(e){var t=e.row;return[Object(n["createVNode"])(y,{type:"primary",link:"",onClick:Object(n["withModifiers"])((function(e){return x.handelEdit(t)}),["stop"])},{default:Object(n["withCtx"])((function(){return[O]})),_:2},1032,["onClick"]),100==x.role?(Object(n["openBlock"])(),Object(n["createBlock"])(y,{key:0,type:"primary",link:"",onClick:Object(n["withModifiers"])((function(e){return x.handelRemove(t)}),["stop"])},{default:Object(n["withCtx"])((function(){return[p]})),_:2},1032,["onClick"])):Object(n["createCommentVNode"])("",!0)]})),_:1},8,["width"])]})),_:1},8,["data"])]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(G,{title:x.dialogTitle,modelValue:k.dialogVisible,"onUpdate:modelValue":t[14]||(t[14]=function(e){return k.dialogVisible=e}),width:"600px",top:"5vh",onClosed:x.handelClose},{footer:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("span",v,[Object(n["createVNode"])(y,{onClick:t[13]||(t[13]=function(e){return k.dialogVisible=!1})},{default:Object(n["withCtx"])((function(){return[C]})),_:1}),1===k.dialogTitleType?(Object(n["openBlock"])(),Object(n["createBlock"])(y,{key:0,type:"primary",loading:k.addLoading,onClick:x.addChainAd},{default:Object(n["withCtx"])((function(){return[_]})),_:1},8,["loading","onClick"])):2===k.dialogTitleType?(Object(n["openBlock"])(),Object(n["createBlock"])(y,{key:1,type:"primary",loading:k.updateLoading,onClick:x.updateChainAd},{default:Object(n["withCtx"])((function(){return[w]})),_:1},8,["loading","onClick"])):Object(n["createCommentVNode"])("",!0)])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(J,{"label-position":"left","label-width":"auto",ref:"form",model:k.form,rules:x.rules},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(S,{label:"token地址",prop:"address"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(M,{modelValue:k.form.address,"onUpdate:modelValue":t[2]||(t[2]=function(e){return k.form.address=e}),modelModifiers:{trim:!0},placeholder:"请输入token地址",clearable:"",disabled:2===k.dialogTitleType},null,8,["modelValue","disabled"])]})),_:1}),Object(n["createVNode"])(S,{label:"chain",prop:"chain"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(q,{modelValue:k.form.chain,"onUpdate:modelValue":t[3]||(t[3]=function(e){return k.form.chain=e}),placeholder:"chain",filterable:"",clearable:"",disabled:2===k.dialogTitleType},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(k.chains,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(F,{key:e.chain,label:e.chain,value:e.chain},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","disabled"])]})),_:1}),Object(n["createVNode"])(S,{label:"类型",prop:"adv_type"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(R,{modelValue:k.form.adv_type,"onUpdate:modelValue":t[4]||(t[4]=function(e){return k.form.adv_type=e})},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(k.categoires,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])(z,{label:e.category,key:t,disabled:2===k.dialogTitleType},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.name_zh_ch),1)]})),_:2},1032,["label","disabled"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(n["createVNode"])(S,{label:"时间范围",prop:"time"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(Y,{modelValue:k.form.time,"onUpdate:modelValue":t[5]||(t[5]=function(e){return k.form.time=e}),type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",format:"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(S,{label:"广告费用",prop:"fee"},{default:Object(n["withCtx"])((function(){return[g,Object(n["createVNode"])(H,{modelValue:k.form.fee,"onUpdate:modelValue":t[6]||(t[6]=function(e){return k.form.fee=e}),min:0,controls:!1},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(S,{label:"交易哈希",prop:"tx_hash"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(M,{modelValue:k.form.tx_hash,"onUpdate:modelValue":t[7]||(t[7]=function(e){return k.form.tx_hash=e}),clearable:""},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(S,{label:"热搜币顺序",prop:"front_show_index"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(H,{modelValue:k.form.front_show_index,"onUpdate:modelValue":t[8]||(t[8]=function(e){return k.form.front_show_index=e}),controls:!1,step:1,"step-strictly":"",min:1},null,8,["modelValue"]),V]})),_:1}),Object(n["createVNode"])(S,{label:"是否显示广告标识",prop:"is_showasadv"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])($,{modelValue:k.form.is_showasadv,"onUpdate:modelValue":t[9]||(t[9]=function(e){return k.form.is_showasadv=e}),"active-text":"显示","inactive-text":"不显示","active-value":1,"inactive-value":0},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(S,{label:"是否忽略跌幅配置",prop:"is_showasadv"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])($,{modelValue:k.form.is_ignorepricechange,"onUpdate:modelValue":t[10]||(t[10]=function(e){return k.form.is_ignorepricechange=e}),"active-text":"忽略","inactive-text":"不忽略","active-value":1,"inactive-value":0},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(S,{label:"是否热门"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(L,{modelValue:k.form.hot_rank,"onUpdate:modelValue":t[11]||(t[11]=function(e){return k.form.hot_rank=e}),size:"large",clearable:"",max:4},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(S,{label:"备注",prop:"remark"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(M,{modelValue:k.form.remark,"onUpdate:modelValue":t[12]||(t[12]=function(e){return k.form.remark=e}),modelModifiers:{trim:!0},placeholder:"请输入备注",clearable:""},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["title","modelValue","onClosed"])])}var x,y=a("1da1"),N=a("5530"),T=(a("96cf"),a("d9e2"),a("d3b7"),a("99af"),a("365c")),B={name:"ChainAd",data:function(){var e=function(e,t){return function(e,t,a){""===t||void 0===t?a(new Error("请输入热搜币序号")):a()}};return{form:{address:"",time:[],chain:"",fee:void 0,tx_hash:"",token_index:void 0,front_show_index:void 0,remark:"",is_showasadv:0,hot_rank:0,is_ignorepricechange:0,adv_type:""},tableData:[],dataLoading:!0,loading:{},dialogVisible:!1,curItem:{},dialogTitleType:1,addLoading:!1,updateLoading:!1,validateIndex:e,categoires:[],chains:[],activeChain:"bsc",activCategoiry:"hot"}},computed:{dialogTitle:function(){var e={1:"添加",2:"编辑"};return e[this.dialogTitleType]},totalFee:function(){return this.tableData.reduce((function(e,t){return t.fee+e}),0)},rules:function(){return{address:[{required:!0,message:"请输入token地址",trigger:"blur"}],chain:[{required:!0,message:"请输入链",trigger:"blur"}],time:[{required:!0,message:"请输入时间",trigger:"blur"}],fee:[{required:!0,message:"请输入费用",trigger:"blur"}],token_index:[{required:!0,message:"请输入index",trigger:"blur"}],front_show_index:[{validator:this.validateIndex(this.tableData,this.curItem),trigger:"blur"}],adv_type:[{required:!0,message:"请选择类型",trigger:"blur"}]}},role:function(){return this.$store.state.userInfo.role}},created:function(){this.getDiscoverList(),this.getChainAdList()},methods:{getDiscoverList:function(){var e=this;Object(T["Mb"])().then((function(t){e.categoires=(null===t||void 0===t?void 0:t.categoires)||[],e.chains=(null===t||void 0===t?void 0:t.chains)||[]})).catch((function(){e.categoires=[],e.chains=[]})).finally((function(){}))},handleTabChange:function(e){this.getChainAdList()},getChainAdList:function(){var e=this;x&&(clearTimeout(x),x=null),x=setTimeout((function(){e.dataLoading=!0,Object(T["yb"])(e.activeChain,e.activCategoiry).then((function(t){e.tableData=t||[]})).catch((function(){e.tableData=[]})).finally((function(){e.dataLoading=!1}))}),500)},addChainAd:function(){var e=this;this.$refs.form.validate((function(t){if(t){var a=Object(N["a"])(Object(N["a"])({},e.form),{},{start_time:parseInt(Date.parse(e.form.time[0])/1e3),end_time:parseInt(Date.parse(e.form.time[1])/1e3)});delete a.time,e.addLoading=!0,Object(T["i"])(a).then((function(t){e.$message.success("添加成功"),e.dialogVisible=!1,e.activeChain=e.form.chain,e.activCategoiry=e.form.adv_type,e.getChainAdList()})).catch((function(){e.$message.error("添加失败")})).finally((function(){e.addLoading=!1}))}}))},updateChainAd:function(){var e=this;this.$refs.form.validate((function(t){if(t){var a=Object(N["a"])(Object(N["a"])({},e.form),{},{start_time:parseInt(Date.parse(e.form.time[0])/1e3),end_time:parseInt(Date.parse(e.form.time[1])/1e3)});delete a.time,e.updateLoading=!0,Object(T["dd"])(a).then((function(t){e.$message.success("更新成功"),e.dialogVisible=!1,e.activeChain=e.form.chain,e.activCategoiry=e.form.adv_type,e.getChainAdList()})).catch((function(){e.$message.error("更新失败")})).finally((function(){e.updateLoading=!1}))}}))},handelState:function(e){var t=this,a=Object(N["a"])(Object(N["a"])({},e),{},{is_delete:e.is_delete});this.loading[e.id]=!0,Object(T["dd"])(a).then(function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$message.success("切换成功");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){t.$message.error("切换失败")})).finally((function(){t.loading[e.id]=!1,t.getChainAdList()}))},handelClose:function(){this.$refs.form.resetFields()},handelAdd:function(){this.form={address:"",time:[],chain:"",fee:void 0,token_index:void 0},this.dialogTitleType=1,this.dialogVisible=!0},handelEdit:function(e){this.dialogTitleType=2,this.curItem=e,this.form=Object(N["a"])(Object(N["a"])({},e),{},{time:[new Date(1e3*e.start_time),new Date(1e3*e.end_time)]}),this.dialogVisible=!0},handelRemove:function(e){var t=this;this.$messageBox.confirm("确定要删除".concat(e.symbol,"广告吗?").concat(e.address,"-").concat(e.chain),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(T["Gc"])(e.id).then((function(e){t.$message({type:"success",message:"删除成功！"}),t.getChainAdList()})).catch((function(e){console.log(e),t.$message({type:"error",message:"删除失败！"})}))})).catch((function(){t.$message({type:"info",message:"已取消"})}))}}},D=(a("8ccc"),a("6b0d")),L=a.n(D);const $=L()(B,[["render",k],["__scopeId","data-v-2aa6700c"]]);t["default"]=$}}]);