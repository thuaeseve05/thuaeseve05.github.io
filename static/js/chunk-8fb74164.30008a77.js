(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8fb74164"],{b97d:function(e,t,o){"use strict";o.r(t);var n=o("7a23"),a=function(e){return Object(n["pushScopeId"])("data-v-e46299a0"),e=e(),Object(n["popScopeId"])(),e},c={class:"gray",style:{width:"100%"}},r={class:"card-header"},i=a((function(){return Object(n["createElementVNode"])("div",null,"灰度发布白名单管理",-1)})),d=Object(n["createTextVNode"])("添加"),l=Object(n["createTextVNode"])("删除"),s=Object(n["createTextVNode"])("全部"),u=Object(n["createTextVNode"])("Android"),b=Object(n["createTextVNode"])("ios"),f={class:"dialog-footer"},p=Object(n["createTextVNode"])("取 消"),j=Object(n["createTextVNode"])("确 定");function O(e,t,o,a,O,h){var m=Object(n["resolveComponent"])("el-button"),V=Object(n["resolveComponent"])("el-table-column"),C=Object(n["resolveComponent"])("el-table"),w=Object(n["resolveComponent"])("el-card"),g=Object(n["resolveComponent"])("el-col"),x=Object(n["resolveComponent"])("el-row"),v=Object(n["resolveComponent"])("el-input"),N=Object(n["resolveComponent"])("el-form-item"),_=Object(n["resolveComponent"])("el-radio"),y=Object(n["resolveComponent"])("el-radio-group"),k=Object(n["resolveComponent"])("el-form"),$=Object(n["resolveComponent"])("el-dialog"),L=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createElementBlock"])("main",c,[Object(n["createVNode"])(x,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(g,{span:24,style:{"margin-bottom":"10px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(w,{class:"box-card",shadow:"never"},{header:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",r,[i,Object(n["createVNode"])(m,{class:"button",type:"primary",link:"",onClick:Object(n["withModifiers"])(h.handelAdd,["stop"])},{default:Object(n["withCtx"])((function(){return[d]})),_:1},8,["onClick"])])]})),default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])(C,{data:O.tableData,stripe:"",style:{width:"100%"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(V,{prop:"address",label:"用户地址"}),Object(n["createVNode"])(V,{prop:"app_type",label:"适用平台"},{default:Object(n["withCtx"])((function(t){var o=t.row;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$f.getPlatform(o.app_type)),1)]})),_:1}),Object(n["createVNode"])(V,{label:"操作",width:"150",align:"center",fixed:"right"},{default:Object(n["withCtx"])((function(e){var t=e.row;return[Object(n["createVNode"])(m,{type:"danger",onClick:Object(n["withModifiers"])((function(e){return h.deleteVersionGatedWhitelist(t)}),["stop"])},{default:Object(n["withCtx"])((function(){return[l]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])),[[L,O.dataLoading]])]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])($,{title:"添加白名单",modelValue:O.dialogVisible,"onUpdate:modelValue":t[3]||(t[3]=function(e){return O.dialogVisible=e}),width:"600px",top:"5vh","close-on-click-modal":!1,onClosed:h.handelClose},{footer:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("span",f,[Object(n["createVNode"])(m,{onClick:t[2]||(t[2]=function(e){return O.dialogVisible=!1})},{default:Object(n["withCtx"])((function(){return[p]})),_:1}),Object(n["createVNode"])(m,{type:"primary",loading:O.addLoading,onClick:h.addVersionGatedWhitelist},{default:Object(n["withCtx"])((function(){return[j]})),_:1},8,["loading","onClick"])])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(k,{"label-position":"left","label-width":"auto",ref:"form",model:O.form,rules:O.rules},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(N,{label:"用户地址",prop:"address"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(v,{modelValue:O.form.address,"onUpdate:modelValue":t[0]||(t[0]=function(e){return O.form.address=e}),modelModifiers:{trim:!0},placeholder:"请输入用户地址",clearable:""},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(N,{label:"适用平台",prop:"app_type"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(y,{modelValue:O.form.app_type,"onUpdate:modelValue":t[1]||(t[1]=function(e){return O.form.app_type=e})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(_,{label:-1},{default:Object(n["withCtx"])((function(){return[s]})),_:1}),Object(n["createVNode"])(_,{label:0},{default:Object(n["withCtx"])((function(){return[u]})),_:1}),Object(n["createVNode"])(_,{label:1},{default:Object(n["withCtx"])((function(){return[b]})),_:1})]})),_:1},8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["modelValue","onClosed"])])}o("d9e2"),o("ac1f"),o("00b4"),o("d3b7");var h=o("365c"),m={name:"Whitelist",data:function(){var e=function(e,t,o){""===t?o(new Error("必填项")):(/^(T|t)[0-9a-zA-Z]{33}$/.test(t)||/^[0-9a-zA-Z]{43,44}$/.test(t)||/^[0-9a-zA-Z]{20,50}$/.test(t)||/^0x[0-9a-zA-Z]{40}$/.test(t),o())};return{form:{address:"",app_type:0},rules:{address:[{validator:e,trigger:"blur"}]},tableData:[],dataLoading:!0,loading:{},dialogVisible:!1,addLoading:!1,updateLoading:!1}},created:function(){this.getVersionGatedWhitelist()},methods:{getVersionGatedWhitelist:function(){var e=this;this.dataLoading=!0,Object(h["tc"])().then((function(t){e.tableData=t||[]})).catch((function(){e.tableData=[]})).finally((function(){e.dataLoading=!1}))},handelClose:function(){this.$refs.form.resetFields()},handelAdd:function(){this.dialogVisible=!0},addVersionGatedWhitelist:function(){var e=this;this.$refs.form.validate((function(t){if(t){e.addLoading=!0;var o=e.form.address;/^0x[0-9a-zA-Z]{40}$/.test(e.form.address)&&(o=o.toLowerCase()),Object(h["D"])(o,e.form.app_type).then((function(t){e.$message.success("添加成功"),e.dialogVisible=!1,e.getVersionGatedWhitelist()})).catch((function(){e.$message.error("添加失败")})).finally((function(){e.addLoading=!1}))}}))},deleteVersionGatedWhitelist:function(e){var t=this;this.$confirm("是否确认删除此白名单？","警告",{type:"warning"}).then((function(){Object(h["nb"])(e.address,e.app_type).then((function(e){t.getVersionGatedWhitelist(),t.$message.success("删除成功")}))})).catch((function(){}))}}},V=(o("c775"),o("6b0d")),C=o.n(V);const w=C()(m,[["render",O],["__scopeId","data-v-e46299a0"]]);t["default"]=w},c2f2:function(e,t,o){},c775:function(e,t,o){"use strict";o("c2f2")}}]);