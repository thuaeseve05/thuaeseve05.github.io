(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fd18cf2"],{"498a":function(e,t,o){"use strict";var n=o("23e7"),r=o("58a8").trim,a=o("c8d2");n({target:"String",proto:!0,forced:a("trim")},{trim:function(){return r(this)}})},"5b77":function(e,t,o){},a7dd:function(e,t,o){"use strict";o.r(t);var n=o("7a23"),r=function(e){return Object(n["pushScopeId"])("data-v-18a5ac93"),e=e(),Object(n["popScopeId"])(),e},a={class:"gray",style:{width:"100%"}},c={class:"card-header"},i=r((function(){return Object(n["createElementVNode"])("div",null,"版本管理",-1)})),l=Object(n["createTextVNode"])("添加"),d=["href"],u=["innerHTML"],b=["innerHTML"],s=Object(n["createTextVNode"])("是"),f=Object(n["createTextVNode"])("否"),m=Object(n["createTextVNode"])("删除"),j=Object(n["createTextVNode"])("全部"),O=Object(n["createTextVNode"])("Android"),p=Object(n["createTextVNode"])("ios_market"),V=Object(n["createTextVNode"])("ios"),h=Object(n["createTextVNode"])("ios_wallet"),v=Object(n["createTextVNode"])("ios_meme_tracker"),w={class:"dialog-footer"},g=Object(n["createTextVNode"])("取 消"),_=Object(n["createTextVNode"])("确 定");function C(e,t,o,r,C,x){var N=Object(n["resolveComponent"])("el-button"),k=Object(n["resolveComponent"])("el-table-column"),y=Object(n["resolveComponent"])("el-tag"),L=Object(n["resolveComponent"])("el-switch"),T=Object(n["resolveComponent"])("el-table"),D=Object(n["resolveComponent"])("el-card"),$=Object(n["resolveComponent"])("el-col"),B=Object(n["resolveComponent"])("el-row"),E=Object(n["resolveComponent"])("el-input"),M=Object(n["resolveComponent"])("el-form-item"),S=Object(n["resolveComponent"])("el-radio"),U=Object(n["resolveComponent"])("el-radio-group"),q=Object(n["resolveComponent"])("el-form"),A=Object(n["resolveComponent"])("el-dialog"),F=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createElementBlock"])("main",a,[Object(n["createVNode"])(B,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])($,{span:24,style:{"margin-bottom":"10px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(D,{class:"box-card",shadow:"never"},{header:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",c,[i,Object(n["createVNode"])(N,{class:"button",type:"primary",link:"",onClick:Object(n["withModifiers"])(x.handelAdd,["stop"])},{default:Object(n["withCtx"])((function(){return[l]})),_:1},8,["onClick"])])]})),default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])(T,{data:C.tableData,stripe:"",style:{width:"100%"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(k,{prop:"version",label:"版本号"}),Object(n["createVNode"])(k,{prop:"created_time",label:"创建时间"},{default:Object(n["withCtx"])((function(t){var o=t.row;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$f.formatDate(o.created_time)),1)]})),_:1}),Object(n["createVNode"])(k,{prop:"download_link",label:"下载链接"},{default:Object(n["withCtx"])((function(e){var t=e.row;return[Object(n["createElementVNode"])("a",{href:t.download_link,target:"_blank"},Object(n["toDisplayString"])(t.download_link),9,d)]})),_:1}),Object(n["createVNode"])(k,{prop:"remark",label:"升级信息"},{default:Object(n["withCtx"])((function(e){var t,o,r=e.row;return[Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div",{innerHTML:null===(t=x.jsonFrom((null===r||void 0===r?void 0:r.remark)||""))||void 0===t?void 0:t.cn},null,8,u),Object(n["createElementVNode"])("div",{innerHTML:null===(o=x.jsonFrom((null===r||void 0===r?void 0:r.remark)||""))||void 0===o?void 0:o.en},null,8,b)])]})),_:1}),Object(n["createVNode"])(k,{prop:"app_type",label:"适用平台",align:"center"},{default:Object(n["withCtx"])((function(t){var o=t.row;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$f.getPlatform(o.app_type)),1)]})),_:1}),Object(n["createVNode"])(k,{prop:"is_forced",label:"是否强制升级",align:"center"},{default:Object(n["withCtx"])((function(e){var t=e.row;return[1===t.is_forced?(Object(n["openBlock"])(),Object(n["createBlock"])(y,{key:0,type:"success"},{default:Object(n["withCtx"])((function(){return[s]})),_:1})):0===t.is_forced?(Object(n["openBlock"])(),Object(n["createBlock"])(y,{key:1,type:"info"},{default:Object(n["withCtx"])((function(){return[f]})),_:1})):Object(n["createCommentVNode"])("",!0)]})),_:1}),Object(n["createVNode"])(k,{label:"状态",align:"center",width:"200",fixed:"right"},{default:Object(n["withCtx"])((function(e){var t=e.row;return[Object(n["createVNode"])(L,{modelValue:t.is_gatedlaunched,"onUpdate:modelValue":function(e){return t.is_gatedlaunched=e},"active-color":"#13ce66","active-text":"正式发布","inactive-text":"灰度发布","active-value":0,"inactive-value":1,loading:C.loading[t.id],onClick:Object(n["withModifiers"])((function(e){return x.handelState(t)}),["stop"])},null,8,["modelValue","onUpdate:modelValue","loading","onClick"])]})),_:1}),Object(n["createVNode"])(k,{label:"操作",width:"150",align:"center",fixed:"right"},{default:Object(n["withCtx"])((function(e){var t=e.row;return[Object(n["createVNode"])(N,{type:"danger",onClick:Object(n["withModifiers"])((function(e){return x.deleteVersion(t)}),["stop"])},{default:Object(n["withCtx"])((function(){return[m]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])),[[F,C.dataLoading]])]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(A,{title:"新增版本",modelValue:C.dialogVisible,"onUpdate:modelValue":t[7]||(t[7]=function(e){return C.dialogVisible=e}),width:"600px",top:"5vh","close-on-click-modal":!1,onClosed:x.handelClose},{footer:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("span",w,[Object(n["createVNode"])(N,{onClick:t[6]||(t[6]=function(e){return C.dialogVisible=!1})},{default:Object(n["withCtx"])((function(){return[g]})),_:1}),Object(n["createVNode"])(N,{type:"primary",loading:C.addLoading,onClick:x.addVersion},{default:Object(n["withCtx"])((function(){return[_]})),_:1},8,["loading","onClick"])])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(q,{"label-position":"left","label-width":"auto",ref:"form",model:C.form,rules:C.rules},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(M,{label:"版本号",prop:"version"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(E,{modelValue:C.form.version,"onUpdate:modelValue":t[0]||(t[0]=function(e){return C.form.version=e}),modelModifiers:{trim:!0},placeholder:"请输入版本号",clearable:""},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(M,{label:"下载链接",prop:"download_link"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(E,{modelValue:C.form.download_link,"onUpdate:modelValue":t[1]||(t[1]=function(e){return C.form.download_link=e}),modelModifiers:{trim:!0},placeholder:"请输入下载链接",clearable:""},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(M,{label:"是否强制升级",prop:"is_forced"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(L,{modelValue:C.form.is_forced,"onUpdate:modelValue":t[2]||(t[2]=function(e){return C.form.is_forced=e}),"active-value":1,"inactive-value":0,"active-text":"是","inactive-text":"否"},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(M,{label:"适用平台",prop:"app_type"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(U,{modelValue:C.form.app_type,"onUpdate:modelValue":t[3]||(t[3]=function(e){return C.form.app_type=e})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(S,{label:-1},{default:Object(n["withCtx"])((function(){return[j]})),_:1}),Object(n["createVNode"])(S,{label:0},{default:Object(n["withCtx"])((function(){return[O]})),_:1}),Object(n["createVNode"])(S,{label:1},{default:Object(n["withCtx"])((function(){return[p]})),_:1}),Object(n["createVNode"])(S,{label:2},{default:Object(n["withCtx"])((function(){return[V]})),_:1}),Object(n["createVNode"])(S,{label:3},{default:Object(n["withCtx"])((function(){return[h]})),_:1}),Object(n["createVNode"])(S,{label:4},{default:Object(n["withCtx"])((function(){return[v]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(n["createVNode"])(M,{label:"版本升级备注信息（中文）",prop:"remark.cn"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(E,{rows:2,autosize:"",type:"textarea",modelValue:C.form.remark.cn,"onUpdate:modelValue":t[4]||(t[4]=function(e){return C.form.remark.cn=e}),placeholder:"请输入版本升级备注信息（中文）",clearable:""},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(M,{label:"版本升级备注信息（英文）",prop:"remark.en"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(E,{rows:2,type:"textarea",autosize:"",modelValue:C.form.remark.en,"onUpdate:modelValue":t[5]||(t[5]=function(e){return C.form.remark.en=e}),placeholder:"请输入版本升级备注信息（英文）",clearable:""},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["modelValue","onClosed"])])}var x=o("1da1"),N=o("5530"),k=(o("96cf"),o("d3b7"),o("498a"),o("365c")),y={name:"Version",data:function(){return{form:{version:"",download_link:"",is_forced:0,is_gatedlaunched:1,app_type:0,remark:{cn:"",en:""}},rules:{version:[{required:!0,message:"请输入版本号",trigger:"blur"}],download_link:[{required:!0,message:"请输入下载链接",trigger:"blur"}],"remark.cn":[{required:!0,message:"请输入版本升级备注信息（中文）",trigger:"blur"}],"remark.en":[{required:!0,message:"请输入版本升级备注信息（英文）",trigger:"blur"}]},tableData:[],dataLoading:!0,loading:{},dialogVisible:!1,addLoading:!1,updateLoading:!1}},created:function(){this.getVersionList()},methods:{getVersionList:function(){var e=this;this.dataLoading=!0,Object(k["nc"])(-1).then((function(t){e.tableData=t||[]})).catch((function(){e.tableData=[]})).finally((function(){e.dataLoading=!1}))},handelClose:function(){this.$refs.form.resetFields()},handelAdd:function(){this.dialogVisible=!0},addVersion:function(){var e=this;this.$refs.form.validate((function(t){if(t){var o,n,r,a,c,i;e.addLoading=!0;var l=Object(N["a"])(Object(N["a"])({},e.form),{},{remark:{cn:(null===(o=e.form)||void 0===o||null===(n=o.remark)||void 0===n||null===(r=n.cn)||void 0===r?void 0:r.trim())||"",en:(null===(a=e.form)||void 0===a||null===(c=a.remark)||void 0===c||null===(i=c.en)||void 0===i?void 0:i.trim())||""}});Object(k["B"])(l).then((function(t){e.$message.success("添加成功"),e.dialogVisible=!1,e.getVersionList()})).catch((function(){e.$message.error("添加失败")})).finally((function(){e.addLoading=!1}))}}))},handelState:function(e){var t=this;this.loading[e.id]=!0,Object(k["sd"])(e.id,e.is_gatedlaunched).then(function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$message.success("切换成功");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){t.$message.error("切换失败")})).finally((function(){t.loading[e.id]=!1,t.getVersionList()}))},deleteVersion:function(e){var t=this;this.$confirm("是否确认删除此版本号","警告",{type:"warning"}).then((function(){Object(k["hb"])(e.id).then((function(e){t.getVersionList(),t.$message.success("删除成功")}))})).catch((function(){}))},jsonFrom:function(e){try{return""===e?"":JSON.parse(e)}catch(t){return""}},getPlatform:function(e){var t={"-1":"全部",0:"Android",1:"ios_market",2:"ios",3:"ios_wallet",4:"ios_meme_tracker"};return(null===t||void 0===t?void 0:t[e])||""}}},L=(o("a88d"),o("6b0d")),T=o.n(L);const D=T()(y,[["render",C],["__scopeId","data-v-18a5ac93"]]);t["default"]=D},a88d:function(e,t,o){"use strict";o("5b77")},c8d2:function(e,t,o){var n=o("5e77").PROPER,r=o("d039"),a=o("5899"),c="​᠎";e.exports=function(e){return r((function(){return!!a[e]()||c[e]()!==c||n&&a[e].name!==e}))}}}]);